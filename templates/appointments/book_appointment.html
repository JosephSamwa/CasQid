{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-lg border-0 rounded-lg overflow-hidden">
                <!-- Card Header with Gradient Background -->
                <div class="card-header py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <h2 class="text-white mb-0 text-center font-weight-bold">Book Your Appointment</h2>
                    <p class="text-white-50 mb-0 text-center">We'll get back to you shortly to confirm your booking</p>
                </div>
                
                <!-- Card Body -->
                <div class="card-body px-5 py-4">
                    <form method="post" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <!-- Progress Indicator -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <small class="text-muted">Step 1 of 3</small>
                                <small class="text-primary">Personal Information</small>
                            </div>
                            <div class="progress" style="height: 6px;">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 33%;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        
                        <!-- Service Selection -->
                        <div class="mb-4">
                            <label for="{{ form.service.id_for_label }}" class="form-label fw-bold">Select Service</label>
                            <div class="input-group">
                                <span class="input-group-text bg-light">
                                    <i class="fas fa-concierge-bell text-primary"></i>
                                </span>
                                {{ form.service }}
                            </div>
                            {% if form.service.errors %}
                                <div class="invalid-feedback d-block">
                                    {{ form.service.errors|join:", " }}
                                </div>
                            {% endif %}
                        </div>
                        
                        <!-- Personal Information Section -->
                        <div class="mb-4">
                            <h5 class="mb-3 text-primary"><i class="fas fa-user-circle me-2"></i>Your Information</h5>
                            
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="{{ form.client_name.id_for_label }}" class="form-label">Full Name</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-user text-primary"></i>
                                        </span>
                                        {{ form.client_name }}
                                    </div>
                                    {% if form.client_name.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.client_name.errors|join:", " }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="{{ form.client_email.id_for_label }}" class="form-label">Email Address</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-envelope text-primary"></i>
                                        </span>
                                        {{ form.client_email }}
                                    </div>
                                    {% if form.client_email.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.client_email.errors|join:", " }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="{{ form.client_phone.id_for_label }}" class="form-label">Phone Number</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-phone text-primary"></i>
                                        </span>
                                        {{ form.client_phone }}
                                    </div>
                                    {% if form.client_phone.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.client_phone.errors|join:", " }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Appointment Time Section -->
                        <div class="mb-4">
                            <h5 class="mb-3 text-primary"><i class="far fa-calendar-alt me-2"></i>Appointment Time</h5>
                            
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="{{ form.requested_date.id_for_label }}" class="form-label">Preferred Date</label>
                                    <div class="input-group datepicker">
                                        <span class="input-group-text bg-light">
                                            <i class="far fa-calendar text-primary"></i>
                                        </span>
                                        {{ form.requested_date }}
                                    </div>
                                    {% if form.requested_date.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.requested_date.errors|join:", " }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="{{ form.requested_time.id_for_label }}" class="form-label">Preferred Time</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="far fa-clock text-primary"></i>
                                        </span>
                                        {{ form.requested_time }}
                                    </div>
                                    {% if form.requested_time.errors %}
                                        <div class="invalid-feedback d-block">
                                            {{ form.requested_time.errors|join:", " }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Additional Notes -->
                        <div class="mb-4">
                            <label for="{{ form.notes.id_for_label }}" class="form-label fw-bold">Additional Notes (Optional)</label>
                            <div class="input-group">
                                <span class="input-group-text bg-light align-items-start">
                                    <i class="fas fa-edit text-primary mt-1"></i>
                                </span>
                                {{ form.notes }}
                            </div>
                        </div>
                        
                        <!-- Form Actions -->
                        <div class="d-grid gap-3 d-md-flex justify-content-md-end mt-4">
                            <button type="reset" class="btn btn-outline-secondary px-4">
                                <i class="fas fa-undo me-2"></i>Reset
                            </button>
                            <button type="submit" class="btn btn-primary px-4">
                                <i class="far fa-paper-plane me-2"></i>Submit Request
                            </button>
                        </div>
                        
                        <!-- Privacy Notice -->
                        <div class="mt-4 text-center text-muted small">
                            <p>Your information is secure and will only be used to confirm your appointment.</p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Custom Styles */
    .card {
        border: none;
        transition: transform 0.3s ease;
    }
    
    .card:hover {
        transform: translateY(-5px);
    }
    
    .form-control, .form-select {
        border-left: 0;
        padding-left: 0;
        border-radius: 0 0.375rem 0.375rem 0 !important;
    }
    
    .input-group-text {
        border-right: 0;
        background-color: #f8f9fa !important;
        border-radius: 0.375rem 0 0 0.375rem !important;
    }
    
    textarea.form-control {
        min-height: 100px;
    }
    
    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
    }
    
    .btn-outline-secondary:hover {
        background-color: #f8f9fa;
    }
    
    /* Datepicker icon fix */
    .datepicker.input-group .input-group-text {
        cursor: pointer;
    }
</style>

<!-- Include Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<!-- Include Flatpickr for better date/time input -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
    // Initialize datepicker
    document.addEventListener('DOMContentLoaded', function() {
        flatpickr("#id_requested_date", {
            dateFormat: "Y-m-d",
            minDate: "today"
        });
        
        // Time picker initialization if needed
         flatpickr("#id_requested_time", {
             enableTime: true,
             noCalendar: true,
             dateFormat: "H:i",
             time_24hr: true
         });
    });
</script>
{% endblock %}